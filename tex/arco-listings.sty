\ProvidesPackage{arco-listings}

%| Customization
%| =============
%|
%| Change listing font size
%| ------------------------
%|
%| Define basicstyle keyval:
%|
%|     basicstyle=\scriptsize\ttfamily
%|
%| May be set locally for a listing or globally with \lstset command

\usepackage{tocbibind}

\usepackage{arco-color}

\usepackage{listings}
\renewcommand{\lstlistingname}{Listado}
\newcommand{\lstfont}{\ttfamily\fontfamily{pcr}}

\renewcommand{\lstlistlistingname}{Índice de listados}
% de tocbibind, para que el índice de listados aparezca en la ToC
\renewcommand{\lstlistoflistings}{%
  \begingroup
  \tocfile{\lstlistlistingname}{lol}
  \endgroup}


\lstset{
  % frame
  frame              = Ltb,
  framerule          = 0pt,
  aboveskip          = 0.5cm,
  framextopmargin    = 3pt,
  framexbottommargin = 3pt,
  framexleftmargin   = 0.4cm,
  framesep           = 0pt,
  rulesep            = .4pt,
  rulesepcolor       = \color{black},
  backgroundcolor    = \color{gray97},
  %--
  % caption
  belowcaptionskip   = 5pt,
  %--
  % text style
  stringstyle        = \ttfamily,
  showstringspaces   = false,
  basicstyle         = \scriptsize\lstfont,
  commentstyle       = \color{gray45},
  keywordstyle       = \bfseries,
  %--
  % numbers
  numbers            = left,
  numbersep          = 15pt,
  numberstyle        = \tiny,
  numberfirstline    = false,
  %
  breaklines         = true,
  emptylines         = 1,     % several empty lines are shown as one
  %
  literate = % caracteres especiales
    {á}{{\'a}}1 {Á}{{\'A}}1
    {é}{{\'e}}1 {É}{{\'E}}1
    {í}{{\'i}}1 {Í}{{\'I}}1
    {ó}{{\'o}}1 {Ó}{{\'O}}1
    {ú}{{\'u}}1 {Ú}{{\'U}}1
    {ñ}{{\~n}}1 {Ñ}{{\~N}}1
    {¡}{{!`}}1 {¿}{{?`}}1
}

\lstnewenvironment{listing}[1][]
   {\pagebreak[0]\lstset{#1}}{\pagebreak[0]}

\lstdefinestyle{consoleStyle}{
  basicstyle=\scriptsize\bf\ttfamily,
  backgroundcolor=\color{gray75},
  numbers=none,
}

\lstnewenvironment{console}[1][]
   {\lstset{style=consoleStyle,#1}\pagebreak[0]}
   {\pagebreak[0]}


\lstloadlanguages{}
